{"version":3,"sources":["file:///D:/Gameproject/NewProject-001/assets/script/scrollControl.ts"],"names":["_decorator","Component","Node","ccclass","property","scrollControl","touchStartPos","leftScroll","rightScroll","start","node","on","EventType","TOUCH_START","touchStart","TOUCH_END","touchEnd","update","deltaTime","onDestroy","off","TOUCH_MOVE","touchMove","TOUCH_CANCEL","touchCancel","event","getLocation","console","log","distance","Math","abs","x","position","y","setPosition"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;;;;;;;;OAC1B;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;+BAGjBK,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCJ,SADnC,CAC6C;AAAA;AAAA;AAAA,eACjCK,aADiC;AAAA,eAEjCC,UAFiC;AAAA,eAGjCC,WAHiC;AAAA;;AAIzCC,QAAAA,KAAK,GAAG;AACJ,eAAKF,UAAL,GAAkB,CAAlB;AACA,eAAKC,WAAL,GAAmB,CAAnB;AACA,eAAKE,IAAL,CAAUC,EAAV,CAAaT,IAAI,CAACU,SAAL,CAAeC,WAA5B,EAAwC,KAAKC,UAA7C,EAAwD,IAAxD;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaT,IAAI,CAACU,SAAL,CAAeG,SAA5B,EAAsC,KAAKC,QAA3C,EAAoD,IAApD,EAJI,CAKJ;AACA;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEDC,QAAAA,SAAS,GAAE;AACP,eAAKT,IAAL,CAAUU,GAAV,CAAclB,IAAI,CAACU,SAAL,CAAeC,WAA7B,EAAyC,KAAKC,UAA9C,EAAyD,IAAzD;AACA,eAAKJ,IAAL,CAAUU,GAAV,CAAclB,IAAI,CAACU,SAAL,CAAeG,SAA7B,EAAuC,KAAKC,QAA5C,EAAqD,IAArD;AACA,eAAKN,IAAL,CAAUU,GAAV,CAAclB,IAAI,CAACU,SAAL,CAAeS,UAA7B,EAAwC,KAAKC,SAA7C,EAAuD,IAAvD;AACA,eAAKZ,IAAL,CAAUU,GAAV,CAAclB,IAAI,CAACU,SAAL,CAAeW,YAA7B,EAA0C,KAAKC,WAA/C,EAA2D,IAA3D;AACH;;AAEDV,QAAAA,UAAU,CAACW,KAAD,EAAO;AACb,eAAKnB,aAAL,GAAqBmB,KAAK,CAACC,WAAN,EAArB;AACH;;AACDF,QAAAA,WAAW,CAACC,KAAD,EAAO;AACdE,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,eAAKtB,aAAL,GAAqBmB,KAAK,CAACC,WAAN,EAArB;AACH;;AAEDJ,QAAAA,SAAS,CAACG,KAAD,EAAO;AACZE,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,cAAG,KAAKtB,aAAL,IAAsB,IAAzB,EAA8B;AAC1B;AACH;;AACD,cAAIuB,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAAUN,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAArD,CAAf;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBC,QAArB;;AAEA,cAAGJ,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAA9C,EAAgD;AAC5CL,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,gBAAG,KAAKrB,UAAL,GAAkB,GAArB,EAAyB;AACrBoB,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,kBAAII,CAAC,GAAG,KAAKtB,IAAL,CAAUuB,QAAV,CAAmBD,CAA3B;AACA,kBAAIE,CAAC,GAAG,KAAKxB,IAAL,CAAUuB,QAAV,CAAmBC,CAA3B;AACA,mBAAKxB,IAAL,CAAUyB,WAAV,CAAsBH,CAAC,GAAC,GAAxB,EAA4BE,CAA5B,EAA8B,CAA9B;AACA,mBAAK3B,UAAL,IAAkB,GAAlB;AACH,aAND,MAMK,CAEJ;AAEJ;;AACD,cAAGkB,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAA9C,EAAgD;AAC5CL,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,gBAAG,KAAKpB,WAAL,GAAmB,GAAtB,EAA0B;AACtBmB,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,kBAAII,EAAC,GAAG,KAAKtB,IAAL,CAAUuB,QAAV,CAAmBD,CAA3B;AACA,kBAAIE,EAAC,GAAG,KAAKxB,IAAL,CAAUuB,QAAV,CAAmBC,CAA3B;AACA,mBAAKxB,IAAL,CAAUyB,WAAV,CAAsBH,EAAC,GAAC,GAAxB,EAA4BE,EAA5B,EAA8B,CAA9B;AACA,mBAAK1B,WAAL,IAAmB,GAAnB;AACH,aAND,MAMK,CAEJ;AACJ;AACJ;;AAEDQ,QAAAA,QAAQ,CAACS,KAAD,EAAO;AACX,cAAG,KAAKnB,aAAL,IAAsB,IAAzB,EAA8B;AAC1B;AACH;;AACD,cAAIuB,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAAUN,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAArD,CAAf;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBC,QAArB;;AAEA,cAAGJ,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAA9C,EAAgD;AAC5CL,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,gBAAG,KAAKrB,UAAL,GAAgB,EAAhB,GAAqB,GAAxB,EAA4B;AACxB,kBAAIyB,CAAC,GAAG,KAAKtB,IAAL,CAAUuB,QAAV,CAAmBD,CAA3B;AACA,kBAAIE,CAAC,GAAG,KAAKxB,IAAL,CAAUuB,QAAV,CAAmBC,CAA3B;AACA,mBAAKxB,IAAL,CAAUyB,WAAV,CAAsBH,CAAC,GAAC,EAAxB,EAA2BE,CAA3B,EAA6B,CAA7B;AACA,mBAAK3B,UAAL,IAAkB,EAAlB;AACH,aALD,MAKK,CAEJ;AAEJ;;AACD,cAAGkB,KAAK,CAACC,WAAN,GAAoBM,CAApB,GAAwB,KAAK1B,aAAL,CAAmB0B,CAA9C,EAAgD;AAC5CL,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,gBAAG,KAAKpB,WAAL,GAAiB,EAAjB,GAAsB,GAAzB,EAA6B;AACzB,kBAAIwB,GAAC,GAAG,KAAKtB,IAAL,CAAUuB,QAAV,CAAmBD,CAA3B;AACA,kBAAIE,GAAC,GAAG,KAAKxB,IAAL,CAAUuB,QAAV,CAAmBC,CAA3B;AACA,mBAAKxB,IAAL,CAAUyB,WAAV,CAAsBH,GAAC,GAAC,EAAxB,EAA2BE,GAA3B,EAA6B,CAA7B;AACA,mBAAK1B,WAAL,IAAmB,EAAnB;AACH,aALD,MAKK,CAEJ;AACJ;AAEJ;;AAlGwC,O","sourcesContent":["import { _decorator, Component, Node, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('scrollControl')\r\nexport class scrollControl extends Component {\r\n    private touchStartPos:Vec3;\r\n    private leftScroll:number;\r\n    private rightScroll:number;\r\n    start() {\r\n        this.leftScroll = 0;\r\n        this.rightScroll = 0;\r\n        this.node.on(Node.EventType.TOUCH_START,this.touchStart,this);\r\n        this.node.on(Node.EventType.TOUCH_END,this.touchEnd,this);\r\n        // this.node.on(Node.EventType.TOUCH_MOVE,this.touchMove,this);\r\n        // this.node.on(Node.EventType.TOUCH_CANCEL,this.touchCancel,this)\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n    onDestroy(){\r\n        this.node.off(Node.EventType.TOUCH_START,this.touchStart,this);\r\n        this.node.off(Node.EventType.TOUCH_END,this.touchEnd,this)\r\n        this.node.off(Node.EventType.TOUCH_MOVE,this.touchMove,this)\r\n        this.node.off(Node.EventType.TOUCH_CANCEL,this.touchCancel,this)\r\n    }\r\n\r\n    touchStart(event){\r\n        this.touchStartPos = event.getLocation()\r\n    }\r\n    touchCancel(event){\r\n        console.log(\"停止触摸\") \r\n        this.touchStartPos = event.getLocation()\r\n    }\r\n\r\n    touchMove(event){\r\n        console.log(\"正在触摸移动\") \r\n        if(this.touchStartPos == null){\r\n            return\r\n        }\r\n        let distance = Math.abs (event.getLocation().x - this.touchStartPos.x);\r\n        console.log(\"滑动距离为：\",distance)\r\n\r\n        if(event.getLocation().x < this.touchStartPos.x){\r\n            console.log(\"向左滑动\")\r\n            if(this.leftScroll < 101){\r\n                console.log(\"正在滑动\")\r\n                let x = this.node.position.x\r\n                let y = this.node.position.y\r\n                this.node.setPosition(x-101,y,0)\r\n                this.leftScroll +=101;\r\n            }else{\r\n                \r\n            }\r\n            \r\n        }\r\n        if(event.getLocation().x > this.touchStartPos.x){\r\n            console.log(\"向右滑动\")\r\n            if(this.rightScroll < 101){\r\n                console.log(\"正在滑动\")\r\n                let x = this.node.position.x\r\n                let y = this.node.position.y\r\n                this.node.setPosition(x+101,y,0)\r\n                this.rightScroll +=101;\r\n            }else{\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    touchEnd(event){\r\n        if(this.touchStartPos == null){\r\n            return\r\n        }\r\n        let distance = Math.abs (event.getLocation().x - this.touchStartPos.x);\r\n        console.log(\"滑动距离为：\",distance)\r\n\r\n        if(event.getLocation().x < this.touchStartPos.x){\r\n            console.log(\"向左滑动\")\r\n            if(this.leftScroll+10 < 101){\r\n                let x = this.node.position.x\r\n                let y = this.node.position.y\r\n                this.node.setPosition(x-10,y,0)\r\n                this.leftScroll +=10;\r\n            }else{\r\n                \r\n            }\r\n            \r\n        }\r\n        if(event.getLocation().x > this.touchStartPos.x){\r\n            console.log(\"向右滑动\")\r\n            if(this.rightScroll+10 < 101){\r\n                let x = this.node.position.x\r\n                let y = this.node.position.y\r\n                this.node.setPosition(x+10,y,0)\r\n                this.rightScroll +=10;\r\n            }else{\r\n                \r\n            }\r\n        }\r\n\r\n    }\r\n    \r\n}\r\n\r\n\r\n"]}