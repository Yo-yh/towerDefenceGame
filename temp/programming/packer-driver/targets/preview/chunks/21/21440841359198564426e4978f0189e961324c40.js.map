{"version":3,"sources":["file:///D:/Gameproject/NewProject-001/assets/script/infoManeger.ts"],"names":["_decorator","Component","Node","resources","Sprite","SpriteFrame","Layers","Label","Prefab","instantiate","ccclass","property","infoManeger","SanShePaoInfo","ZhuiJiDanInfo","GuangZiJianInfo","setInfoBox","toolType","currentType","node","getChildByName","destroy","addComponent","setPosition","load","_err","spriteFrame","getComponent","layer","Enum","UI_2D","setScale","err","nodeLabel","name","addChild","refreshInfo","parent","getChildByPath","string","describe"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, resources, Sprite, SpriteFrame, Layers, find, Label, Prefab, instantiate } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('infoManeger')\r\nexport class infoManeger extends Component {\r\n    @property\r\n    currentType:number = 0;//默认为0，表示没有当前的值。\r\n\r\n    public SanShePaoInfo = {\r\n        \"name\":\"散射炮\",\r\n        \"describe\":\"使用该建筑可以发射出不同角度的炮弹，攻击敌人；\"\r\n    }\r\n    public ZhuiJiDanInfo = {\r\n        \"name\":\"追踪弹\",\r\n        \"describe\":\"该建筑可以锁定目标并实施打击直到该目标陨灭\"\r\n    }\r\n    public GuangZiJianInfo = {\r\n        \"name\":\"光子箭\",\r\n        \"describe\":\"该建筑具有快速和攻击力强的特点，将会释放出光子流攻击敌机\"\r\n    }\r\n    // start() {\r\n\r\n    // }\r\n\r\n    // update(deltaTime: number) {\r\n        \r\n    // }\r\n\r\n    setInfoBox(toolType:number){\r\n        if(toolType == this.currentType){\r\n            this.currentType = 0;\r\n            this.node.getChildByName(\"infoBoxsub\").destroy();\r\n        }else{\r\n            if(this.currentType == 0){\r\n                let node = new Node('infoBoxsub');\r\n                node.addComponent(Sprite);\r\n                node.setPosition(0,0,0);\r\n                resources.load('wenzikuang/spriteFrame',SpriteFrame,(_err,spriteFrame)=>{\r\n                    node.getComponent(Sprite).spriteFrame = spriteFrame;\r\n                    //在cocos3x版本中，layer默认为default，node.layer = Layers.Enum.UI_2D；\r\n                    //2d摄像头可见的是UI_2D和UI_3D\r\n                    node.layer = Layers.Enum.UI_2D;\r\n                    node.setScale(0.6,0.6,1);\r\n                    node.setPosition(0,-50,0);\r\n                    resources.load(\"perfabs/infoLabel\",Prefab,(err,Prefab)=>{\r\n                        if(!Prefab){\r\n                        }else{\r\n                            let nodeLabel = instantiate(Prefab);\r\n                            if(!node){\r\n                            }else{\r\n                                nodeLabel.name = \"nodeLabel\"\r\n                                node.layer = Layers.Enum.UI_2D;\r\n                                node.addChild(nodeLabel);\r\n                                this.refreshInfo(toolType,node)\r\n                            }\r\n                            \r\n                        }\r\n                    })\r\n                })\r\n                // director.getScene().addChild(node);\r\n                // node.parent=this.node.parent.parent;\r\n\r\n                \r\n                \r\n                node.parent = this.node;\r\n                this.currentType = toolType;\r\n                // this.refreshInfo(toolType,this.node.getChildByName(\"infoBoxsub\"));\r\n            }else{\r\n                this.currentType = toolType;\r\n                this.refreshInfo(toolType,this.node.getChildByName(\"infoBoxsub\"));\r\n            }\r\n            \r\n        }\r\n    }\r\n    refreshInfo(toolType,node:Node){\r\n        if(toolType == 1){\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"name\").getComponent(Label).string = this.SanShePaoInfo.name;\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"describe\").getComponent(Label).string = this.SanShePaoInfo.describe;\r\n\r\n        }\r\n\r\n        if(toolType == 2){\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"name\").getComponent(Label).string = this.ZhuiJiDanInfo.name;\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"describe\").getComponent(Label).string = this.ZhuiJiDanInfo.describe;\r\n        }\r\n\r\n        if(toolType == 3){\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"name\").getComponent(Label).string = this.GuangZiJianInfo.name;\r\n            node.getChildByPath(\"nodeLabel\").getChildByName(\"describe\").getComponent(Label).string = this.GuangZiJianInfo.describe;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}