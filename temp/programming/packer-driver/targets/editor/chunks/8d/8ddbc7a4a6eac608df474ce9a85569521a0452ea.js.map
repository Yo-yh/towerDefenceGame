{"version":3,"sources":["file:///D:/Gameproject/NewProject-001/assets/script/talkManeger.ts"],"names":["_decorator","Component","Node","find","Label","director","audioBeginController","ccclass","property","talkManeger","message","step","oldPositiony","start","getPosition","y","node","name","on","EventType","TOUCH_START","talkContinue","update","deltaTime","getComponent","play","destroy","x","setPosition","active","string","length","loadScene"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, find, Label, director, Sprite, resources } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { audioBeginController } from './audioBeginController';\r\n\r\n@ccclass('talkManeger')\r\nexport class talkManeger extends Component {\r\n    public message:Array<string> = [\r\n        \"神木使者，你终于来了……敌族火族窥伺我族<神木>已久，得不到就想销毁它。派出了火族的大军正在来的路上。\",\r\n        \"还好使者来的及时，只有使者才能驱动神木之力，建筑塔防，拯救神木。\",\r\n        \"我给你介绍一下塔防的建筑吧。\",\r\n        \"这是<散射炮>，可以朝着敌军的方向发射子弹。\",\r\n        \"这是<追踪弹>，可以锁定目标敌机执行打击。\",\r\n        \"这是<光子箭>，可以发射光子束打击敌军。\",\r\n        \"拖动这些建筑就可以生效啦。\",\r\n        \"这是扩建功能,去建造更多的<神木卫阵>吧\",\r\n        \"这是召唤<风翼军>，风翼军是很强的兵种\",\r\n        \"这是召唤<神兵精灵>，就是我，保卫我们的建筑不受敌军空降兵的破坏。\",\r\n        \"神木使者千万要注意，搭建塔防和升级塔防都需要消耗神力值，使者只要好好利用神力值，就能打败那些可恶的火族！\",\r\n        \"对了，敌军分为三种，一种是<战焰机>、一种是<战陨机>、一种是<空降兵>\",\r\n        \"<战焰机>携带子弹会攻击我方建筑，<战陨机>速度很快会直接攻击神木，<空降兵>则专门破坏我方建筑\",\r\n        \"根据情报，火族的进攻有十种阵营，越到后面，难度将越大，神木的存活就靠使者了，我们都相信你！\"\r\n    ]\r\n\r\n    public step:number = 0;\r\n    public oldPositiony:number;\r\n\r\n    @property(audioBeginController)\r\n    audioBeginController:audioBeginController = null;\r\n\r\n    start() {\r\n        this.oldPositiony = find(\"Canvas/talk\").getPosition().y;\r\n        if(this.node.name == '')\r\n        this.node.on(Node.EventType.TOUCH_START,this.talkContinue,this);\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n    talkContinue(){\r\n        this.node.getComponent(audioBeginController).play();\r\n        this.step++;\r\n        if(this.step == 7){\r\n            find(\"Canvas/talk/infobg\").destroy();\r\n            let node = find(\"Canvas/talk\")\r\n            let y = node.getPosition().y;\r\n            let x = node.getPosition().x;\r\n            node.setPosition(x,0,0);\r\n            find(\"Canvas/bottom\").active = true;\r\n        }\r\n        if(this.step == 8){\r\n            find(\"Canvas/bottom/b1\").active = false;\r\n            find(\"Canvas/bottom/b2\").active = true;\r\n        }\r\n        if(this.step == 9){\r\n            find(\"Canvas/bottom/b2\").active = false;\r\n            find(\"Canvas/bottom/b3\").active = true;\r\n        }\r\n        if(this.step == 3){\r\n            find(\"Canvas/talk/infobg\").active = true;\r\n        }\r\n        if(this.step == 4){\r\n            find(\"Canvas/talk/infobg/info\").active = false;\r\n            find(\"Canvas/talk/infobg/info1\").active = true;\r\n            find(\"Canvas/talk/infobg/name\").getComponent(Label).string = \"追踪弹\"\r\n        }\r\n        if(this.step == 5){\r\n            find(\"Canvas/talk/infobg/info1\").active = false;\r\n            find(\"Canvas/talk/infobg/info2\").active = true;\r\n            find(\"Canvas/talk/infobg/name\").getComponent(Label).string = \"光子箭\"\r\n        }\r\n        if(this.step == 10){\r\n            find(\"Canvas/bottom\").destroy();\r\n            let node = find(\"Canvas/talk\")\r\n            // let y = node.getPosition().y;\r\n            let x = node.getPosition().x;\r\n            node.setPosition(x,this.oldPositiony,0);\r\n        }\r\n        if(this.step == 11){\r\n            find(\"Canvas/emeny\").active = true;\r\n        }\r\n\r\n        if(this.step >= this.message.length){\r\n            find(\"Canvas/emeny\").destroy();\r\n            director.loadScene(\"scene\");\r\n        }else{\r\n            find(\"Canvas/talk/message\").getComponent(Label).string = this.message[this.step];\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}